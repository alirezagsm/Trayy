{
	// vscode tasks file for Trayy, by A. Ghasemi
	// See https://go.microsoft.com/fwlink/?LinkId=733558
	// for the documentation about the tasks.json format
	"version": "2.0.0",
	"tasks": [
		{
			"label": "Build Project Release",
			"type": "shell",
			"command": "powershell.exe",
			"args": [
				"if (!(Test-Path -Path release)) { New-Item -ItemType Directory -Path release; }",
				"Copy-Item -Path bin/Trayy.exe -Destination release\\ -Force;",
				"Copy-Item -Path bin/hook.dll -Destination release\\ -Force;",
				"Compress-Archive -Path release\\Trayy.exe,release\\hook.dll -DestinationPath release\\Trayy.zip -Force;",
				"Write-Host 'Done!'"
			],
			"options": {
				"shell": {
					"executable": "powershell.exe",
					"args": ["-NoProfile", "-ExecutionPolicy", "Bypass"]
				}
			},
			"dependsOn": ["Build exe"],
			"dependsOrder": "sequence",
			"problemMatcher": "$msCompile"
		},
		{
			"label": "Build Project Debug",
			"type": "shell",
			"command": "echo",
			"args": ["Done!"],
			"dependsOn": ["Build exe Debug"],
			"dependsOrder": "sequence",
			"problemMatcher": "$msCompile"
		},
		{
			"label": "Clean",
			"type": "shell",
			"command": "",
			"args": [
				"Remove-Item -Path Trayy.exe, hook.dll, hook.obj, Trayy.res, Trayy_UI.obj, imgui.obj, imgui_draw.obj, imgui_tables.obj, imgui_widgets.obj, imgui_impl_win32.obj, imgui_impl_dx11.obj, updater.obj -Force -ErrorAction SilentlyContinue"
			],
			"options": {
				"shell": {
					"executable": "powershell.exe",
					"args": ["-NoProfile", "-ExecutionPolicy", "Bypass"]
				},
				"cwd": "bin/"
			},
			"problemMatcher": []
		},
		{
			"label": "Build exe Debug",
			"type": "shell",
			"command": "cl",
			"args": [
				"src/Trayy.cpp",
				"src/Trayy_UI.cpp",
				"src/imgui/imgui.cpp",
				"src/imgui/imgui_draw.cpp",
				"src/imgui/imgui_tables.cpp",
				"src/imgui/imgui_widgets.cpp",
				"src/imgui/backends/imgui_impl_win32.cpp",
				"src/imgui/backends/imgui_impl_dx11.cpp",
				"src/updater.cpp",
				"bin/Trayy.res",
				"/EHsc",
				"/Zi",
				"/nologo",
				"/std:c++17",
				"/Ibin",
				"/Isrc/imgui",
				"/Fe:bin/Trayy.exe",
				"/Fo:bin/",
				"/link",
				"bin/hook.lib",
				"User32.lib",
				"Shcore.lib",
				"Shlwapi.lib",
				"Advapi32.lib",
				"Shell32.lib",
				"Comctl32.lib",
				"ole32.lib",
				"oleaut32.lib",
				"d3d11.lib",
				"d3dcompiler.lib"
			],
			"dependsOn": ["Build hook"],
			"dependsOrder": "sequence",
			"problemMatcher": "$msCompile"
		},
		{
			"label": "Build exe",
			"type": "shell",
			"command": "cl",
			"args": [
				"src/Trayy.cpp",
				"src/Trayy_UI.cpp",
				"src/imgui/imgui.cpp",
				"src/imgui/imgui_draw.cpp",
				"src/imgui/imgui_tables.cpp",
				"src/imgui/imgui_widgets.cpp",
				"src/imgui/backends/imgui_impl_win32.cpp",
				"src/imgui/backends/imgui_impl_dx11.cpp",
				"src/updater.cpp",
				"bin/Trayy.res",
				"/EHsc",
				"/nologo",
				"/O2",
				"/std:c++17",
				"/Ibin",
				"/Isrc",
				"/Isrc\\imgui",
				"/Fe:bin/Trayy.exe",
				"/Fo:bin/",
				"/link",
				"bin/hook.lib",
				"User32.lib",
				"Shlwapi.lib",
				"Shcore.lib",
				"Advapi32.lib",
				"Shell32.lib",
				"Comctl32.lib",
				"ole32.lib",
				"oleaut32.lib",
				"d3d11.lib",
				"d3dcompiler.lib"
			],
			"dependsOn": ["Build hook"],
			"dependsOrder": "sequence",
			"problemMatcher": "$msCompile"
		},
		{
			"label": "Build hook",
			"type": "cppbuild",
			"command": "link",
			"args": [
				"/DLL",
				"/nologo",
				"/out:bin/hook.dll",
				"bin/hook.obj",
				"User32.lib",
				"Shcore.lib",
				"Psapi.lib"
			],
			"dependsOn": ["Build hook obj"],
			"dependsOrder": "sequence",
			"problemMatcher": ["$msCompile"]
		},
		{
			"label": "Build hook obj",
			"type": "cppbuild",
			"command": "cl",
			"args": ["/c", "/nologo", "/EHsc", "/Fo:bin/", "src/hook.cpp"],
			"dependsOn": ["Build res"],
			"dependsOrder": "sequence",
			"problemMatcher": ["$msCompile"]
		},
		{
			"label": "Build res",
			"type": "shell",
			"command": "rc",
			"args": ["/fo", "bin/Trayy.res", "src/Trayy.rc"],
			"dependsOn": ["Clean"],
			"dependsOrder": "sequence",
			"problemMatcher": ["$msCompile"]
		}
	]
}
